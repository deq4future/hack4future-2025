# -*- coding: utf-8 -*-
"""Codemon.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1PGr-6ZmEYNmOV_sUz4-1mucd3TFQ2hw8
"""

import os
import random
import requests



def clear_screen():
    os.system('cls' if os.name == 'nt' else 'clear')

# ASCII Art del jugador i monstruos (igual que abans)
player_art = r"""
   \O/
    |
   / \
 You (Hero)
"""

monster_ascii = {
    "Marrameu": r"""
    |\___/|
   (= o_o =)
   (")___(")
 Marrameu
""",
    "Pyrosaur": r"""
    /^ ^\
   / 0 0 \
   V\ Y /V
    / - \
   |    \
   || (__)
 Pyrosaur
""",
    "Bugzilla": r"""
    .-'      '-.
   /            \
  |              |
   \.--. .--./
   (    Y    )
    \__^__/
  Bugzilla
""",
    "Stacktoise": r"""
   _____     ____
  /     \~~~/    \\
 (  o  o ) ( o o  )
  \__^__/   \_^__/
  /     \___/     \\
 |               |
 |__|_|_|___|_|__|
Stacktoise
""",
    "Nullphant": r"""
     _.-- ,.--.
   .'   .'     /
   | @       |'..--------._
  /      \._/              '.
 /  .-.-                     \
(  /    \                     \
 \\      '.                  | #
  \\       \   -.           /
   :\       |    )._____.'   \
    "       |   /  \  |  \    )
            |   |./'  :__ \.-'
            '--'
Nullphant
""",
    "Indentarion": r"""
     ,     ,
    (\____/)
     (_oo_)
     (O  O)
    /   \/\
   (__/\__)
   | |  | |
  /_/|__|_\
 Indentarion
""",
    "Dracorix": r"""
      /^\/^\
    _|__|  O|
\/     /~  \
 \____|__________/  \
        \_______      \
                `\     \                 \
                  |     |                  \
                 /      /                    \
                /     /                       \
              /      /                         \ \
             /     /                            \  \
           /     /             _----_            \   \
          /     /           _-~      ~-_         |   |
         (      (        _-~    _--_    ~-_     _/   |
          \      ~-____-~    _-~    ~-_    ~-_-~    /
            ~-_           _-~          ~-_       _-~
               ~--______-~                ~-___-~
Dracorix
""",
    "Toxicorn": r"""
      .     .
       \___/
      (o o)
      / V \
     /(   )\
     ^^   ^^
  Toxicorn
""",
    "Cryptodon": r"""
     .-=-.
    /  !  \
   |      |
   |  .-. |
   |  | | |
   |  '-' |
    \     /
     `---`
 Cryptodon
""",
    "Voltigon": r"""
     \     /
      \   /
       \_/
       |=|
      __|__
     /     \
    |  âš¡  |
     \___/
 Voltigon
"""
}

# Preguntes Python
preguntes_python = [
    {"pregunta": "Quin tipus retorna la funciÃ³ len() en Python?", "opcions": ["float", "str", "int"], "resposta": "int"},
    {"pregunta": "Quina Ã©s la sortida de print('Hola'[1])?", "opcions": ["H", "o", "a"], "resposta": "o"},
    {"pregunta": "Quin operador sâ€™utilitza per fer divisiÃ³ entera en Python?", "opcions": ["/", "%", "//"], "resposta": "//"},
    {"pregunta": "Quin Ã©s el resultat de 2 ** 3 en Python?", "opcions": ["6", "5", "8"], "resposta": "8"},
    {"pregunta": "Com sâ€™inicialitza una llista buida?", "opcions": ["{}", "()", "[]"], "resposta": "[]"},
    {"pregunta": "Quin Ã©s el resultat de bool([])?", "opcions": ["False", "True", "Error"], "resposta": "False"},
    {"pregunta": "Quina paraula clau s'utilitza per definir una funciÃ³?", "opcions": ["defunc", "function", "def"], "resposta": "def"},
    {"pregunta": "Com es representa un diccionari buit?", "opcions": ["[]", "()", "{}"], "resposta": "{}"},
    {"pregunta": "Quin mÃ¨tode sâ€™utilitza per afegir un element a una llista?", "opcions": ["insert()", "extend()", "append()"], "resposta": "append()"},
    {"pregunta": "QuÃ¨ fa el mÃ¨tode .pop() dâ€™una llista?", "opcions": ["Afegeix un element", "Elimina i retorna lâ€™Ãºltim element", "Ordena la llista"], "resposta": "Elimina i retorna lâ€™Ãºltim element"},
    {"pregunta": "Quina paraula clau sâ€™utilitza per sortir dâ€™un bucle?", "opcions": ["skip", "break", "stop"], "resposta": "break"},
    {"pregunta": "Quin tipus de dada Ã©s {'a': 1, 'b': 2}?", "opcions": ["set", "list", "dict"], "resposta": "dict"},
    {"pregunta": "Com podem convertir una cadena '123' a un enter?", "opcions": ["str('123')", "float('123')", "int('123')"], "resposta": "int('123')"},
    {"pregunta": "Quin Ã©s el resultat de 3 > 2 and 2 > 1?", "opcions": ["False", "True", "None"], "resposta": "True"},
    {"pregunta": "Com es comenta una lÃ­nia en Python?", "opcions": ["//", "<!-- -->", "#"], "resposta": "#"},
    {"pregunta": "Quin tipus retorna type(3.14)?", "opcions": ["int", "float", "str"], "resposta": "float"},
    {"pregunta": "Quin mÃ¨tode sâ€™utilitza per eliminar un element concret dâ€™una llista?", "opcions": ["remove()", "delete()", "pop(index)"], "resposta": "remove()"},
    {"pregunta": "Com es diu que un parÃ metre de funciÃ³ tÃ© un valor per defecte?", "opcions": ["Optatiu", "Inicialitzat", "Valor per defecte"], "resposta": "Valor per defecte"},
    {"pregunta": "Quin serÃ  el resultat de 5 % 2?", "opcions": ["1", "2", "0"], "resposta": "1"},
    {"pregunta": "Quin Ã©s el tipus de range(5)?", "opcions": ["list", "range", "tuple"], "resposta": "range"},
    {"pregunta": "Quina estructura sâ€™utilitza per repetir instruccions mentre una condiciÃ³ Ã©s certa?", "opcions": ["for", "while", "repeat"], "resposta": "while"},
    {"pregunta": "Quin serÃ  el resultat de list('abc')?", "opcions": ["['abc']", "['a', 'b', 'c']", "['a b c']"], "resposta": "['a', 'b', 'c']"},
    {"pregunta": "Quin mÃ¨tode de cadena converteix tot el text a majÃºscules?", "opcions": ["capitalize()", "upper()", "majuscules()"], "resposta": "upper()"},
    {"pregunta": "Com es diu un valor que no Ã©s ni True ni False perÃ² representa 'res'?", "opcions": ["False", "None", "Empty"], "resposta": "None"},
    {"pregunta": "Quin operador sâ€™utilitza per comparar igualtat?", "opcions": ["=", "=>", "=="], "resposta": "=="},
    {"pregunta": "Com podem obtenir la longitud dâ€™una cadena?", "opcions": ["size('text')", "count('text')", "len('text')"], "resposta": "len('text')"},
    {"pregunta": "Quina Ã©s la sortida de print(type(True))?", "opcions": ["str", "bool", "int"], "resposta": "bool"},
    {"pregunta": "Quina Ã©s la sortida de print(9 // 2)?", "opcions": ["4", "4.5", "5"], "resposta": "4"},
    {"pregunta": "Quin operador representa la negaciÃ³ lÃ²gica?", "opcions": ["not equal", "!", "not"], "resposta": "not"},
    {"pregunta": "Com es defineix una tupla?", "opcions": ["[1, 2]", "(1, 2)", "{1, 2}"], "resposta": "(1, 2)"},
    {"pregunta": "Quin dâ€™aquests Ã©s un tipus immutable?", "opcions": ["list", "tuple", "dict"], "resposta": "tuple"},
    {"pregunta": "Quin Ã©s el mÃ¨tode correcte per afegir mÃºltiples valors a una llista?", "opcions": ["add()", "extend()", "push()"], "resposta": "extend()"},
    {"pregunta": "Quina estructura serveix per capturar errors en Python?", "opcions": ["try-catch", "try-except", "error-check"], "resposta": "try-except"},
    {"pregunta": "Quin serÃ  el resultat de set([1,2,2,3])?", "opcions": ["[1,2,2,3]", "{1,2,3}", "(1,2,2,3)"], "resposta": "{1,2,3}"},
    {"pregunta": "Com pots saber si una clau existeix dins un diccionari?", "opcions": ["key in dict", "key == dict", "'key' in dict"], "resposta": "'key' in dict"},
    {"pregunta": "Quin mÃ¨tode sâ€™utilitza per ordenar una llista?", "opcions": ["sort()", "organize()", "order()"], "resposta": "sort()"},
    {"pregunta": "Quin Ã©s el mÃ¨tode per obtenir el valor dâ€™una clau dâ€™un diccionari?", "opcions": ["value()", "get()", "access()"], "resposta": "get()"},
    {"pregunta": "Quin valor retorna una funciÃ³ si no tÃ© return explÃ­cit?", "opcions": ["False", "None", "0"], "resposta": "None"},
    {"pregunta": "Com pots fer una funciÃ³ anÃ²nima?", "opcions": ["def =", "lambda", "static"], "resposta": "lambda"},
    {"pregunta": "Com pots saber els elements Ãºnics dâ€™una llista?", "opcions": ["list()", "dict()", "set()"], "resposta": "set()"},
    {"pregunta": "Quin mÃ¨tode retorna el nÃºmero dâ€™aparicions dâ€™un element a una llista?", "opcions": ["count()", "times()", "amount()"], "resposta": "count()"},
    {"pregunta": "Quin mÃ¨tode de cadena elimina espais al principi i final?", "opcions": ["clean()", "strip()", "cut()"], "resposta": "strip()"},
    {"pregunta": "QuÃ¨ retorna range(3)?", "opcions": ["[0,1,2,3]", "[0,1,2]", "[1,2,3]"], "resposta": "[0,1,2]"},
    {"pregunta": "Quin Ã©s el valor de not False?", "opcions": ["True", "False", "None"], "resposta": "True"},
    {"pregunta": "Quin Ã©s el mÃ¨tode per inserir en una posiciÃ³ concreta dâ€™una llista?", "opcions": ["insert()", "place()", "put()"], "resposta": "insert()"},
    {"pregunta": "Quin tipus de dada Ã©s [x for x in range(3)]?", "opcions": ["dict", "list", "tuple"], "resposta": "list"},
    {"pregunta": "Quin sÃ­mbol sâ€™utilitza per concatenar cadenes?", "opcions": ["-", ",", "+"], "resposta": "+"},
    {"pregunta": "Com pots executar un codi nomÃ©s si Ã©s el fitxer principal?", "opcions": ["if __main__ == '__name__'", "if __name__ == '__main__'", "main(__name__)"], "resposta": "if __name__ == '__main__'"},
    {"pregunta": "Com es diu una funciÃ³ dins una classe?", "opcions": ["mÃ¨tode", "atribut", "instÃ ncia"], "resposta": "mÃ¨tode"},
    {"pregunta": "Quin serÃ  el resultat de bool('False')?", "opcions": ["True", "False", "Error"], "resposta": "True"}
]

class Monster:
    def __init__(self, name, HP, LVL, ATTACK, art):
        self.name = name
        self.HP = HP
        self.LVL = LVL
        self.ATTACK = ATTACK
        self.art = art

class Player:
    def __init__(self, name, HP, LVL, ATTACK):
        self.name = name
        self.HP = HP
        self.LVL = LVL
        self.ATTACK = ATTACK

score = 0
highscore = 0
difficulty_multiplier = 1

def status_bar():
    print("\nğŸ§‘â€ğŸ’» Estat del jugador:")
    print("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
    print(f"â•‘ â¤ï¸ Vida: {player.HP:<16}â•‘")
    print(f"â•‘ âš”ï¸  Atac: {player.ATTACK:<15}â•‘")
    print(f"â•‘ ğŸ“ˆ Nivell: {player.LVL:<14}â•‘")
    print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

def print_title():
    print(r"""
 _________            .___
 \_   ___ \  ____   __| _/____   _____   ____   ____
 /    \  \/ /  _ \ / __ |/ __ \ /     \ /  _ \ /    \
 \     \___(  <_> ) /_/ \  ___/|  Y Y  (  <_> )   |  \
  \______  /\____/\____ |\___  >__|_|  /\____/|___|  /
         \/            \/    \/      \/            \/
 ________          _____              __      __  .__                            .__  .__ ._._.
 \______ \   _____/ ____\____ _____ _/  |_  _/  |_|  |__   ____   _____   _____  |  | |  || | |
  |    |  \_/ __ \   __\/ __ \\__  \\   __\ \   __\  |  \_/ __ \ /     \  \__  \ |  | |  || | |
  |    `   \  ___/|  | \  ___/ / __ \|  |    |  | |   Y  \  ___/|  Y Y  \  / __ \|  |_|  |_\|\|
 /_______  /\___  >__|  \___  >____  /__|    |__| |___|  /\___  >__|_|  / (____  /____/____/___
         \/     \/          \/     \/                  \/     \/      \/       \/          \/\/
               âš”ï¸  BENVINGUT A CODEMON âš”ï¸
""")

def Attack():
    global player, monster1
    question = random.choice(preguntes_python)

    clear_screen()
    print(f"{player_art}      {monster1.art}")
    status_bar()
    print(f"\nğŸ”¥ {question['pregunta']}")
    for idx, option in enumerate(question["opcions"], 1):
        print(f"{idx}. {option}")

    try:
        user_input = int(input("\nEscriu el nÃºmero de la resposta correcta: "))
        if question["opcions"][user_input - 1] == question["resposta"]:
            print("\nâœ”ï¸ Correcte! Player ataca!")
            monster1.HP -= player.ATTACK
            if monster1.HP < 0: monster1.HP = 0
            print(f"{monster1.name} HP restant: {monster1.HP}")
        else:
            raise ValueError
    except (ValueError, IndexError):
        print("\nâŒ Incorrecte! Monster ataca!")
        player.HP -= monster1.ATTACK
        if player.HP < 0: player.HP = 0
        print(f"HP restant del jugador: {player.HP}")

    input("\nPrem ENTER per continuar...")

def M_die():
    global score
    clear_screen()
    print(f"\nğŸ’€ El monstre {monster1.name} ha mort!")
    score += 25
    print(f"PuntuaciÃ³ actual: {score}")
    input("\nPrem ENTER per continuar...")

def P_Die():
    global highscore, score
    clear_screen()
    print("\nâ˜ ï¸ Has mort!")
    if score > highscore:
        highscore = score
        print("ğŸ‰ Nou rÃ¨cord!")
    print(f"ğŸ† La teva millor puntuaciÃ³: {highscore}")
    score = 0
    input("\nPrem ENTER per continuar...")

def Battle():
    global monster1
    while player.HP > 0 and monster1.HP > 0:
        clear_screen()
        print(f"âš”ï¸ Batalla: {player.name} VS {monster1.name}\n")
        print(f"{player_art}      {monster1.art}")
        status_bar()
        print("\nâ–¶ï¸ Torn del jugador")
        Attack()

def create_monster():
    monsters = list(monster_ascii.items())
    name, art = random.choice(monsters)
    level = player.LVL
    base_hp = random.randint(80, 150)
    base_atk = random.randint(5, 15)
    hp = int(base_hp + level * 10 * difficulty_multiplier)
    attack = int(base_atk + level * 2 * difficulty_multiplier)
    return Monster(name, hp, level, attack, art)

def Game():
    global monster1, player
    while player.HP > 0:
        Battle()

        if player.HP <= 0:
            P_Die()
            break

        if monster1.HP <= 0:
            M_die()
            player.LVL += 1
            player.HP += 20 * difficulty_multiplier
            player.ATTACK += random.randint(5, 15) * difficulty_multiplier

            clear_screen()
            print(f"\nâ¬†ï¸ Has pujat de nivell! Nivell {player.LVL}")
            print(f"Nova Vida: {player.HP}, Nou Atac: {player.ATTACK}")

            monster1 = create_monster()
            input("\nPrem ENTER per continuar...")

def main():
    respuesta = requests.get("https://fun.codelearn.cat/hackathon/game/new")
    print(respuesta.status_code)
    dades = respuesta.json()

    global player, monster1, difficulty_multiplier
    random.seed(dades["seed"])
    while True:
        clear_screen()
        print_title()
        print("1. Jugar")
        print("2. Millor puntuaciÃ³")
        print("3. Sortir")

        option = input("Selecciona una opciÃ³: ").strip()

        if option == "1":
            print("\nğŸ§  Tria dificultat:")
            print("1. FÃ cil")
            print("2. DifÃ­cil")
            diff = input("Opcio: ").strip()
            difficulty_multiplier = 1 if diff == "1" else 2

            player = Player("You", 100, 1, 20)
            monster1 = create_monster()

            Game()
        elif option == "2":
            clear_screen()
            print(f"\nğŸ… Millor puntuaciÃ³: {highscore}")
            input("\nPrem ENTER per continuar...")
        elif option == "3":
            print("ğŸ‘‹ Fins aviat!")
            break
        else:
            print("Opcio no vÃ lida!")
            input("\nPrem ENTER per continuar...")

if __name__ == "__main__":
    main()